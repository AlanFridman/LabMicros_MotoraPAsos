/*! **********************************************************************************************
* 2015  ITESM Campus Guadalajara. Laboratorio de Microcontroladores 
*  
*
* @file:      Speed_Manager.c
* @author(s):  
*
* @brief (Theory of Operation)
*
**************************************************************************************************/


/*************************************************************************************************/
/*********************						Includes						**********************/
/*************************************************************************************************/
#include "types.h"
#include <hidef.h> /* for EnableInterrupts macro */
#include "derivative.h" /* include peripheral declarations */
#include "HAL\MTIM.h"
#include "HAL\ADC_Driver.h"
/*************************************************************************************************/
/*********************						Defines							**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************						Typedefs						**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************					Function Prototypes					**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************                  Static Variables                    **********************/
/*************************************************************************************************/
static char Valor_voltaje;
static unsigned short calculo_tiempo_us;
static unsigned short tiempo_us;
/*************************************************************************************************/
/*********************					Global Variables					**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************                  Static Constants                    **********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************                  Global Constants                    **********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************				   Exported Functions					**********************/
/*************************************************************************************************/
void Motor_Speed(void)
{
	ADC_Init();  /*Initializes the ADC module*/
	Valor_voltaje = Analog_Read(); /*Read the convertion of the ADC*/
	calculo_tiempo_us =((unsigned short)(Valor_voltaje)*156)+4000; /*Use the aproximation ecuation*/
	tiempo_us = (calculo_tiempo_us)/100;/*Put the result in a u16*/
	delay_us_MTIM(tiempo_us);/*set the delay */
}
/************************************************************************************************/
/*********************				    Private Functions					**********************/
/*************************************************************************************************/

